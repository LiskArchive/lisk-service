@Library('lisk-jenkins') _
pipeline {
	agent none
	stages {
		stage('Readiness check') {
			steps {
				script { echoBanner(STAGE_NAME) }
				// Mainnet service URL
				waitForHttp('http://localhost:9901/api/ready')
			}
		}
		stage('Run regression tests Mainnet') {
			steps {
				script { echoBanner(STAGE_NAME) }
				ansiColor('xterm') {
					nvm(getNodejsVersion()) {
						dir('./tests') { sh 'npm run test:regression:mainnet' }
					}
				}
			}
		}
	}
}
// vim: filetype=groovy
